<UserControl x:Class="TeamProj.Views.Dialogs.EditDialog"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
             xmlns:models="clr-namespace:TeamProj.Models"
             xmlns:dialogs="clr-namespace:TeamProj.Views.Dialogs"
             Width="400" Height="400">
    <UserControl.Resources>
        <dialogs:StringToIntCollectionConverter x:Key="IntCollectionConverter"/>

        <!-- DataTemplate для Student -->
        <DataTemplate DataType="{x:Type Models:Student}">
            <StackPanel Margin="10">
                <ui:TextBox Text="{Binding FirstName}" PlaceholderText="First Name" Margin="5"/>
                <ui:TextBox Text="{Binding LastName}" PlaceholderText="Last Name" Margin="5"/>
                <ui:TextBox Text="{Binding BornAt, StringFormat=yyyy-MM-dd}" PlaceholderText="Born At (yyyy-MM-dd)" Margin="5"/>
                <ui:TextBox Text="{Binding EnlistedAt, StringFormat=yyyy-MM-dd}" PlaceholderText="Enlisted At (yyyy-MM-dd)" Margin="5"/>
            </StackPanel>
        </DataTemplate>

        <!-- DataTemplate для Teacher -->
        <DataTemplate DataType="{x:Type models:Teacher}">
            <StackPanel Margin="10">
                <ui:TextBox Text="{Binding FirstName}" PlaceholderText="First Name" Margin="5"/>
                <ui:TextBox Text="{Binding LastName}" PlaceholderText="Last Name" Margin="5"/>
                <ui:TextBox Text="{Binding BornAt, StringFormat=yyyy-MM-dd}" PlaceholderText="Born At (yyyy-MM-dd)" Margin="5"/>
                <ui:TextBox Text="{Binding HiredAt, StringFormat=yyyy-MM-dd}" PlaceholderText="Hired At (yyyy-MM-dd)" Margin="5"/>
            </StackPanel>
        </DataTemplate>

        <!-- DataTemplate для Grade -->
        <DataTemplate DataType="{x:Type Models:Grade}">
            <StackPanel Margin="10">
                <ui:TextBox Text="{Binding AddedAt, StringFormat=yyyy-MM-dd}" PlaceholderText="Added At (yyyy-MM-dd)" Margin="5"/>
                <ui:TextBox Text="{Binding RemovedAt, StringFormat=yyyy-MM-dd}" PlaceholderText="Removed At (yyyy-MM-dd)" Margin="5"/>
                <ui:TextBox Text="{Binding Value}" PlaceholderText="Value" Margin="5"/>
                <ui:TextBox Text="{Binding Commentary}" PlaceholderText="Commentary" Margin="5"/>
                <ui:TextBox Text="{Binding TeacherId}" PlaceholderText="Teacher ID" Margin="5"/>
                <ui:TextBox Text="{Binding StudentId}" PlaceholderText="Student ID" Margin="5"/>
            </StackPanel>
        </DataTemplate>

        <!-- DataTemplate для Lesson -->
        <DataTemplate DataType="{x:Type Models:Lesson}">
            <StackPanel Margin="10">
                <ui:TextBox Text="{Binding Subject}" PlaceholderText="Subject" Margin="5"/>
                <ui:TextBox Text="{Binding StartTime, StringFormat=yyyy-MM-ddTHH:mm}" PlaceholderText="Start Time (yyyy-MM-ddTHH:mm)" Margin="5"/>
                <ui:TextBox Text="{Binding EndTime, StringFormat=yyyy-MM-ddTHH:mm}" PlaceholderText="End Time (yyyy-MM-ddTHH:mm)" Margin="5"/>
                <ui:TextBox Text="{Binding TeacherId}" PlaceholderText="Teacher ID" Margin="5"/>
                <ui:TextBox Text="{Binding ScheduleId}" PlaceholderText="Schedule ID" Margin="5"/>
            </StackPanel>
        </DataTemplate>

        <!-- DataTemplate для Schedule -->
        <DataTemplate DataType="{x:Type Models:Schedule}">
            <StackPanel Margin="10">
                <ui:TextBox Text="{Binding Date, StringFormat=yyyy-MM-dd}" PlaceholderText="Date (yyyy-MM-dd)" Margin="5"/>
                <ui:TextBox Text="{Binding GradeId}" PlaceholderText="Grade ID" Margin="5"/>
                <ui:TextBox Text="{Binding Lessons, Converter={StaticResource IntCollectionConverter}}" PlaceholderText="Lessons (comma-separated IDs)" Margin="5"/>
            </StackPanel>
        </DataTemplate>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ContentPresenter для отображения DataTemplate на основе типа Item -->
        <ContentPresenter Grid.Row="0" Content="{Binding Item}"/>

        <!-- Кнопки Save и Cancel -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="10">
            <ui:Button Content="Save" Command="{Binding SaveCommand}" Margin="5" Appearance="Primary"/>
            <ui:Button Content="Cancel" Command="{Binding CancelCommand}" Margin="5"/>
        </StackPanel>
    </Grid>
</UserControl>
